# 2026-01-22 å¾…åŠ

---

## ğŸ“‹ å½“æ—¥ç›®æ ‡

**ç³»ç»Ÿæ€§æ•´ç†æ–‡æ¡£** - å…¨é¢æ£€æŸ¥ã€å½’æ¡£ä¸ç»“æ„åŒ–é¡¹ç›®æ–‡æ¡£ï¼Œç¡®ä¿ä¸æœ€æ–°ä»£ç è¿›åº¦ä¸€è‡´ã€‚

---

## â³ å¾…éªŒè¯ (ä» 21 æ—¥ç»“è½¬)

### æ ¸å¿ƒæœºåˆ¶ PIE æµ‹è¯•
- [ ] **ä¼¤å®³åˆ¤å®š**ï¼šè¢«æ£€æµ‹æ‰£è¡€/æŠ¤ç›¾æ¶ˆè€— (-34 HP)
- [ ] **åŠ¨ä½œäº’æ–¥**ï¼šå—å‡»æ—¶å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„åŠ¨ä½œ (Sprint/Aim/Throw)
- [ ] **æ­»äº¡å¹¿æ’­**ï¼šæ­»äº¡ç©å®¶ä½¿å‘¨å›´ç©å®¶å¤±è¡¡ (Stagger)
- [ ] **æ·˜æ±°ä¸ç»“æŸ**ï¼š
  - [ ] æ­»äº¡åç¦ç”¨ç¢°æ’/Ragdoll
  - [ ] ç»ˆç‚¹è§¦å‘å®Œæˆäº‹ä»¶ä¸ GE
  - [ ] æ‰€æœ‰äººå®Œæˆ/æ·˜æ±°åè§¦å‘ `OnLevelShouldEnd`

---

## ğŸ“‚ æ–‡æ¡£æ•´ç†æ¸…å• (ä»Šæ—¥é‡ç‚¹)

### 1. æ¶æ„æ–‡æ¡£ä¸€è‡´æ€§æ£€æŸ¥ âœ… å·²å®Œæˆ
- [x] æ£€æŸ¥ `GS_Core` / `GS_Endurance` æ˜¯å¦åŒ…å«æœ€æ–°çš„ç»“æŸåˆ¤å®šé€»è¾‘
- [x] æ£€æŸ¥ `GI_FiveBox` å‡½æ•°åˆ—è¡¨æ˜¯å¦å®Œæ•´ (CheckLevelEndCondition ç­‰)
- [x] æ£€æŸ¥ `PC_Core` çš„äº‹ä»¶ç›‘å¬é€»è¾‘è¯´æ˜
- [x] æ£€æŸ¥ `Comp_Character_Endurance` çš„æ­»äº¡æµç¨‹æè¿°

**å®Œæˆå†…å®¹**ï¼š
- ç³»ç»Ÿæ€§æ£€æŸ¥äº†æ‰€æœ‰æ ¸å¿ƒæ–‡æ¡£çš„"å†—ä½™/è¿‡æ—¶/çŸ›ç›¾"é—®é¢˜
- ä¿®å¤äº† 2 ä¸ªä¸¥é‡é—®é¢˜ï¼š
  1. Comp_Character_Endurance.md - åˆ é™¤é‡å¤çš„"ç›¸å…³æ–‡æ¡£"ç« èŠ‚
  2. PC_Core.md - åˆ é™¤ HandlePlayerFinish ä¸‹çš„é”™è¯¯ WARNING
- ç¡®è®¤äº†"å¾…éªŒè¯"å’Œ"å¾…å®ç°"æ ‡è®°çš„å‡†ç¡®æ€§
- åœ¨ç³»ç»Ÿæ¶æ„.md ä¸­æ·»åŠ äº†"æ ¸å¿ƒæ¦‚å¿µè¾¨æ"ç« èŠ‚ï¼Œæ¸…æ™°å®šä¹‰äº†"ç©å®¶æ·˜æ±°"ã€"å…³å¡ç»“æŸ"ã€"DSç»“æŸ"ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ

### 2. å¾…åŠå½’æ¡£
- [ ] ç¡®è®¤ `2026-01-21.md` ä¸­å·²å®Œæˆé¡¹æ— é—æ¼
- [ ] å°†è¿‡æœŸçš„è®¾è®¡è‰æ¡ˆæ ‡è®°ä¸º [Deprecated] æˆ–å½’æ¡£

### 3. ç»„ä»¶æ–‡æ¡£æ›´æ–°
- [ ] `BP_FinishLine` (å·²æ›´æ–°ï¼Œå†æ¬¡ç¡®è®¤)
- [ ] `BP_Monitor` (ç¡®è®¤ Detection é€»è¾‘)

---

---

## ğŸ”§ æ¶æ„ä¼˜åŒ–ï¼šGM_Core ç»Ÿä¸€å¤„ç†æ·˜æ±°/å®Œæˆ

> [!IMPORTANT]
> **å‘ç°ä¸¥é‡ Bug**ï¼šAI åˆ°è¾¾ç»ˆç‚¹åå®ŒæˆçŠ¶æ€ä¸ä¼šè¢«è®°å½•ï¼ˆå› ä¸º AI æ²¡æœ‰ PCï¼‰
> 
> **è§£å†³æ–¹æ¡ˆ**ï¼šè®© GM_Core ç»Ÿä¸€å¤„ç†æ‰€æœ‰ç©å®¶çš„æ·˜æ±°/å®Œæˆé€»è¾‘
> 
> **è¯¦ç»†æ–¹æ¡ˆ**ï¼šè§ `æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ.md`

### å…³é”® Bug ä¿®å¤ï¼šAI äº‹ä»¶ç›‘å¬ç¼ºå¤± âœ… å·²å®Œæˆ

**å‘ç°çš„ä¸¥é‡é—®é¢˜**ï¼š
- AI ä¸ä¼šè§¦å‘ OnPostLoginï¼Œæ‰€ä»¥ä¸ä¼šè°ƒç”¨ HandlePlayerLogin
- AI ä¸ä¼šç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå¯¼è‡´ GM_Core.HandlePlayerFinish å’Œ HandlePlayerEliminate ä¸ä¼šè¢«è°ƒç”¨
- AI åˆ°è¾¾ç»ˆç‚¹æˆ–æ­»äº¡æ—¶ï¼Œæ¡£æ¡ˆä¸ä¼šè¢«è®°å½•

**ä¿®å¤æ­¥éª¤**ï¼š
- [x] **æ­¥éª¤ 1**ï¼šä¿®æ”¹ HandlePlayerLogin çš„å‚æ•°ï¼šä» `PlayerController` æ”¹ä¸º `BP_Character_Game`
- [x] **æ­¥éª¤ 2**ï¼šä¿®æ”¹ OnPostLoginï¼šè°ƒç”¨ `HandlePlayerLogin(NewPlayer.GetPawn())`
- [x] **æ­¥éª¤ 3**ï¼šä¿®æ”¹ RestoreAISurvivorsï¼šåœ¨ SpawnActor åè°ƒç”¨ `HandlePlayerLogin(SpawnedCharacter)`
- [x] **æ­¥éª¤ 4**ï¼šä¿®æ”¹ FillAIPlayersï¼šåœ¨ SpawnActor åè°ƒç”¨ `HandlePlayerLogin(SpawnedCharacter)`

**ä¿®å¤ç»“æœ**ï¼š
- âœ… çœŸäººå’Œ AI éƒ½ä¼šè°ƒç”¨ HandlePlayerLogin
- âœ… æ‰€æœ‰ç©å®¶éƒ½ä¼šç»‘å®šäº‹ä»¶ç›‘å¬
- âœ… AI åˆ°è¾¾ç»ˆç‚¹æˆ–æ­»äº¡æ—¶ï¼Œæ¡£æ¡ˆä¼šè¢«æ­£ç¡®è®°å½•

---

### ç¬¬ä¸€æ­¥ï¼šGM_Core æ·»åŠ äº‹ä»¶ç›‘å¬ âœ… å·²å®Œæˆ
- [x] **GM_Core.HandlePlayerLogin**ï¼šåœ¨ OnPostLogin æ—¶ä¸ºæ¯ä¸ªç©å®¶ç»‘å®šäº‹ä»¶ç›‘å¬
- [x] **GM_Core.HandlePlayerEliminate**ï¼šè®°å½•æ·˜æ±° + è§¦å‘æ£€æŸ¥
- [x] **GM_Core.HandlePlayerFinish**ï¼šè®°å½•å®Œæˆ + è§¦å‘æ£€æŸ¥
- [ ] **PIE æµ‹è¯•**ï¼šéªŒè¯ AI å®ŒæˆçŠ¶æ€æ˜¯å¦è¢«è®°å½•ï¼ˆæ­¤æ—¶ä¼šæœ‰é‡å¤è°ƒç”¨ï¼Œä½†ä¸å½±å“ï¼‰

**å®Œæˆæ ‡å‡†**ï¼šAI åˆ°è¾¾ç»ˆç‚¹åï¼Œ`GI_FiveBox.PlayerRecords[].IsFinished` è¢«æ­£ç¡®è®¾ç½®ä¸º true

**å®ç°ç¡®è®¤**ï¼š
- âœ… OnPostLogin æœ«å°¾æ·»åŠ äº† HandlePlayerLogin è°ƒç”¨
- âœ… HandlePlayerLogin ä¸ºæ¯ä¸ªç©å®¶ç»‘å®šäº†æ·˜æ±°/å®Œæˆäº‹ä»¶ç›‘å¬
- âœ… HandlePlayerEliminate å®ç°äº†è®°å½•æ·˜æ±° + è§¦å‘æ£€æŸ¥
- âœ… HandlePlayerFinish å®ç°äº†è®°å½•å®Œæˆ + è§¦å‘æ£€æŸ¥

### ç¬¬äºŒæ­¥ï¼šComp_Character_Endurance ç®€åŒ– âœ… å·²å®Œæˆ
- [x] åˆ é™¤ `SetPlayerEliminate()` å‡½æ•°è°ƒç”¨
- [x] åˆ é™¤ `SetPlayerEliminate()` å‡½æ•°å®šä¹‰
- [ ] **PIE æµ‹è¯•**ï¼šéªŒè¯æ·˜æ±°æµç¨‹æ˜¯å¦æ­£å¸¸ï¼ˆåº”è¯¥ç”± GM å¤„ç†ï¼‰

**å®Œæˆæ ‡å‡†**ï¼šç©å®¶æ­»äº¡åï¼Œæ·˜æ±°çŠ¶æ€ä»ç„¶è¢«æ­£ç¡®è®°å½•ï¼Œä¸”è§¦å‘å…³å¡ç»“æŸæ£€æŸ¥

**å®ç°ç¡®è®¤**ï¼š
- âœ… HandleHealthChanged ä¸­å·²åˆ é™¤ SetPlayerEliminate() è°ƒç”¨
- âœ… åªä¿ç•™æ­»äº¡è¡¨ç°ç›¸å…³é€»è¾‘ï¼ˆæ­»äº¡å¹¿æ’­ã€æ‰è½é‡‘å¸ã€Ragdollã€å‘é€äº‹ä»¶ï¼‰
- âœ… æ¡£æ¡ˆç®¡ç†äº¤ç»™ GM_Core ç»Ÿä¸€å¤„ç†

### ç¬¬ä¸‰æ­¥ï¼šPC_Core ç®€åŒ– âœ… å·²å®Œæˆ
- [x] HandlePlayerFinishï¼šåˆ é™¤ `SetPlayerFinished` è°ƒç”¨
- [x] HandlePlayerFinishï¼šåˆ é™¤ `CheckLevelShouldEnd` è°ƒç”¨
- [ ] **PIE æµ‹è¯•**ï¼šéªŒè¯å®Œæˆæµç¨‹æ˜¯å¦æ­£å¸¸ï¼ˆåº”è¯¥ç”± GM å¤„ç†ï¼‰

**å®Œæˆæ ‡å‡†**ï¼šçœŸäººç©å®¶åˆ°è¾¾ç»ˆç‚¹åï¼Œå®ŒæˆçŠ¶æ€ä»ç„¶è¢«æ­£ç¡®è®°å½•ï¼Œä¸”è§¦å‘å…³å¡ç»“æŸæ£€æŸ¥

**å®ç°ç¡®è®¤**ï¼š
- âœ… HandlePlayerEliminate åªä¿ç•™ UnPossess å’ŒçœŸäººç‰¹æ®Šé€»è¾‘
- âœ… HandlePlayerFinish å·²æ¸…ç©ºï¼Œæ— æ¡£æ¡ˆç®¡ç†é€»è¾‘
- âœ… æ¡£æ¡ˆç®¡ç†å’Œå…³å¡æ£€æŸ¥éƒ½äº¤ç»™ GM_Core å¤„ç†

### ç¬¬å››æ­¥ï¼šBP_FinishLine è¿›ä¸€æ­¥ä¼˜åŒ– âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šå°†çŠ¶æ€æ ‡è®°é€»è¾‘ä»åœºæ™¯ Actor æ‹†åˆ†åˆ° Character ç»„ä»¶

**å­ä»»åŠ¡**ï¼š
- [x] **BP_FinishLine ç®€åŒ–**ï¼šåˆ é™¤ `ASC.BP_ApplyGameplayEffectToSelf(GE_Finish)` å’Œ `SetCollisionObjectType` è°ƒç”¨
- [x] **Comp_Character_Endurance æ–°å¢ç›‘å¬**ï¼šåœ¨ WaitForASC ä¸­ç›‘å¬ `Gameplay.Event.Player.Finished` äº‹ä»¶
- [x] **Comp_Character_Endurance æ–°å¢å¤„ç†å‡½æ•°**ï¼šHandlePlayerFinishï¼Œåº”ç”¨ GE_Finish å’Œç¢°æ’åˆ‡æ¢
- [ ] **PIE æµ‹è¯•**ï¼šéªŒè¯å®ŒæˆçŠ¶æ€æ ‡è®°æ˜¯å¦æ­£å¸¸

**å®Œæˆæ ‡å‡†**ï¼š
- BP_FinishLine åªè´Ÿè´£äº‹ä»¶å‘é€
- Comp_Character_Endurance è´Ÿè´£åº”ç”¨ GE_Finish å’Œç¢°æ’åˆ‡æ¢
- ç©å®¶åˆ°è¾¾ç»ˆç‚¹åï¼Œ`Player.State.Finished` æ ‡ç­¾è¢«æ­£ç¡®æ·»åŠ 

**å®ç°ç¡®è®¤**ï¼š
- âœ… BP_FinishLine åªä¿ç•™ SendGameplayEventToActor
- âœ… Comp_Character_Endurance.WaitForASC æ–°å¢ç›‘å¬ Gameplay.Event.Player.Finished
- âœ… Comp_Character_Endurance.HandlePlayerFinish åº”ç”¨ GE_Finish å’Œç¢°æ’åˆ‡æ¢

### ç¬¬äº”æ­¥ï¼šBP_StartLine å¯¹ç§°ä¼˜åŒ– âœ… å·²å®Œæˆ

**ç›®æ ‡**ï¼šå°†ç¢°æ’åˆ‡æ¢é€»è¾‘ä»åœºæ™¯ Actor æ‹†åˆ†åˆ° Character ç»„ä»¶ï¼Œå’Œ FinishLine ä¿æŒæ¶æ„å¯¹ç§°

**å­ä»»åŠ¡**ï¼š
- [x] **åˆ›å»º GameplayTag**ï¼š`Gameplay.Event.Player.Started`
- [x] **BP_StartLine ç®€åŒ–**ï¼šåˆ é™¤ `SetCollisionObjectType(PawnBlock)`ï¼Œæ·»åŠ  `SendGameplayEventToActor(Gameplay.Event.Player.Started)`
- [x] **Comp_Character_Endurance æ–°å¢ç›‘å¬**ï¼šåœ¨ WaitForASC ä¸­ç›‘å¬ `Gameplay.Event.Player.Started` äº‹ä»¶
- [x] **Comp_Character_Endurance æ–°å¢å¤„ç†å‡½æ•°**ï¼šHandlePlayerStartï¼Œå¤„ç†ç¢°æ’åˆ‡æ¢ï¼ˆPawn â†’ PawnBlockï¼‰
- [ ] **PIE æµ‹è¯•**ï¼šéªŒè¯èµ·ç‚¹å•å‘é€šè¡Œæ˜¯å¦æ­£å¸¸

**å®Œæˆæ ‡å‡†**ï¼š
- BP_StartLine åªè´Ÿè´£ç‚¹ç§¯åˆ¤å®šå’Œäº‹ä»¶å‘é€
- Comp_Character_Endurance è´Ÿè´£ç¢°æ’åˆ‡æ¢
- ç©å®¶ç©¿è¿‡ StartLine åï¼Œç¢°æ’é€šé“æ­£ç¡®åˆ‡æ¢ä¸º PawnBlock
- ç©å®¶æ— æ³•è¿”å›å‡ºç”Ÿç‚¹

**å®ç°ç¡®è®¤**ï¼š
- âœ… GameplayTag `Gameplay.Event.Player.Started` å·²æ·»åŠ åˆ° GameplayTags.csv
- âœ… BP_StartLine åªä¿ç•™ SendGameplayEventToActor
- âœ… Comp_Character_Endurance.WaitForASC æ–°å¢ç›‘å¬ Gameplay.Event.Player.Started
- âœ… Comp_Character_Endurance.HandlePlayerStart å¤„ç†ç¢°æ’åˆ‡æ¢

### ç¬¬å…­æ­¥ï¼šPIE ç»¼åˆæµ‹è¯• â³ å¾…å¼€å§‹
- [ ] **èµ·ç‚¹å•å‘é€šè¡Œ**ï¼šç©å®¶ç©¿è¿‡ StartLine åæ— æ³•è¿”å›å‡ºç”Ÿç‚¹
- [ ] **ç»ˆç‚¹å•å‘é€šè¡Œ**ï¼šç©å®¶ç©¿è¿‡ FinishLine åæ— æ³•è¿”å›èµ›é“
- [ ] **AI å®ŒæˆçŠ¶æ€**ï¼šAI åˆ°è¾¾ç»ˆç‚¹åï¼Œ`GI_FiveBox.PlayerRecords[].IsFinished` æ˜¯å¦è¢«æ­£ç¡®è®¾ç½®
- [ ] **çœŸäººå®ŒæˆçŠ¶æ€**ï¼šçœŸäººåˆ°è¾¾ç»ˆç‚¹åï¼Œå®ŒæˆçŠ¶æ€æ˜¯å¦æ­£å¸¸
- [ ] **æ·˜æ±°æµç¨‹**ï¼šç©å®¶æ­»äº¡åï¼Œæ·˜æ±°çŠ¶æ€æ˜¯å¦è¢«æ­£ç¡®è®°å½•ï¼Œä¸”è§¦å‘å…³å¡ç»“æŸæ£€æŸ¥
- [ ] **å…³å¡ç»“æŸæ£€æŸ¥**ï¼šæ‰€æœ‰äººå®Œæˆ/æ·˜æ±°åï¼Œæ˜¯å¦è§¦å‘ `OnLevelShouldEnd`
- [ ] **çŠ¶æ€æ ‡ç­¾**ï¼šå®Œæˆåæ˜¯å¦æ­£ç¡®æ·»åŠ  `Player.State.Finished` æ ‡ç­¾

### ç¬¬ä¸ƒæ­¥ï¼šæ–‡æ¡£æ›´æ–° âœ… å·²å®Œæˆ
- [x] æ›´æ–° `GM_Core.md`ï¼šæ·»åŠ æ–°å¢å‡½æ•°è¯´æ˜ï¼ˆHandlePlayerLogin, HandlePlayerEliminate, HandlePlayerFinishï¼‰
- [x] æ›´æ–° `Comp_Character_Endurance.md`ï¼šåˆ é™¤ SetPlayerEliminateï¼Œæ·»åŠ  HandlePlayerStart å’Œ HandlePlayerFinish
- [x] æ›´æ–° `PC_Core.md`ï¼šåˆ é™¤æ¡£æ¡ˆç®¡ç†ç›¸å…³å†…å®¹
- [x] æ›´æ–° `BP_FinishLine.md`ï¼šåˆ é™¤ GE_Finish å’Œç¢°æ’åˆ‡æ¢ç›¸å…³å†…å®¹
- [x] æ›´æ–° `BP_StartLine.md`ï¼šåˆ é™¤ç¢°æ’åˆ‡æ¢ï¼Œæ·»åŠ äº‹ä»¶å‘é€
- [x] æ›´æ–° `ç³»ç»Ÿæ¶æ„.md`ï¼šæ›´æ–°èŒè´£åˆ†å·¥è¯´æ˜å’Œæ•°æ®æµå‘
- [x] å½’æ¡£ `æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ.md` åˆ° `å¾…åŠæ–‡æ¡£/å·²å½’æ¡£/2026-01-22-æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ.md`

**å®Œæˆæ ‡å‡†**ï¼šæ‰€æœ‰æ–‡æ¡£å‡†ç¡®åæ˜ æ¶æ„ä¼˜åŒ–åçš„å®ç°ï¼Œæ–‡æ¡£ä¹‹é—´ä¿¡æ¯ä¸€è‡´

**å®Œæˆæƒ…å†µ**ï¼š
- âœ… æ‰€æœ‰æ­£å¼æ–‡æ¡£å·²æ›´æ–°å®Œæˆ
- âœ… æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆå·²å½’æ¡£ï¼ˆè¯·æ‰‹åŠ¨åˆ é™¤æ ¹ç›®å½•çš„ `æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ.md`ï¼‰

---

## ğŸ“… Phase è·¯çº¿å›¾

| ä¼˜å…ˆçº§ | Phase | çŠ¶æ€ | å†…å®¹ |
|:------:|-------|:----:|------|
| âœ… | Phase 6 | âœ… | **ä¼¤å®³ä¸æ·˜æ±°é€»è¾‘** (ä»£ç å·²å®Œå·¥ï¼Œå¾…éªŒè¯) |
| 1 | **æ¶æ„ä¼˜åŒ–** | â³ | **GM_Core ç»Ÿä¸€å¤„ç†æ·˜æ±°/å®Œæˆ** (ä¿®å¤ AI Bug) |
| 2 | Phase 7 | âŒ | AI è¡Œä¸º (è¡Œä¸ºæ ‘ + å¯»è·¯) |
| 3 | Phase 8 | âŒ | UI å®Œå–„ (ä¸»èœå•/ç»“ç®—ç•Œé¢) |
| 4 | Phase 9 | âŒ | ç‰¹æ•ˆ/éŸ³æ•ˆ |
