# 2024-12-31 待办

## 当前阶段：关卡1 耐力之匣 - Phase 1 基础移动

### 今日待办
- [ ] Phase 1：基础移动 + 玩家交互

---

## 开发计划

### Phase 0：测试环境搭建（✅ 完成）

### Phase 1：基础移动 + 玩家交互

**开发顺序**：Ability → 玩家输入 → AI BTTask

历史完成项见 [2024-12-30.md](2024-12-30.md)

- [ ] 基础移动系统
  - [ ] 关卡1/5 奔跑体力消耗（Periodic Cost）
  - [ ] IA_Endurance_Crouch 配置
  - [ ] GE_Crouch 创建（Crouching 标签）
  - [ ] 蹲行输入处理（Toggle）
  - [ ] 关卡1/5 跳跃体力消耗（按次消耗）
  - [ ] 体力自动回复（Periodic GE）
- [ ] 推搡系统
  - [ ] GA_Push（推搡 Ability）
  - [ ] 玩家输入绑定
  - [ ] BTTask_Push（AI 触发）
- [ ] 闪避系统
  - [ ] GA_Dodge（闪避 Ability）
  - [ ] 玩家输入绑定
  - [ ] BTTask_Dodge（AI 触发）
- [ ] 失衡/摔倒状态
  - [ ] GA_Stagger（失衡状态）
  - [ ] GA_Fall（摔倒状态）
  - [ ] 玩家 QTE 恢复
  - [ ] AI 概率判定
- [ ] DetectionBox 组件（检测前方可交互对象）

### Phase 2：道具系统
- [ ] 投掷类（MOTS 插件）：香蕉皮、炸弹
- [ ] Buff 类（GE）：跑鞋、护盾、磁铁
- [ ] 资源类：金币

### Phase 3：完善
- [ ] 死亡判定（HP 归零 → 淘汰）
- [ ] 死亡广播（周围玩家失衡）
- [ ] AI 完善（体力管理、遮挡策略）

---

## 架构备忘

**职责分离**：
- Comp_Endurance：检测逻辑（移动检测、Danger 标签）
- AbilitySet_Endurance：GAS 操作（推搡、闪避、投掷、失衡、摔倒、麻痹）
- GE 系列：状态效果（GE_Sprint、GE_Crouch、GE_Jump、GE_Moving 等）
- IMC_Endurance：关卡1/5 专属输入（蹲行、推搡、闪避、道具使用等）
- BT_Endurance：AI 行为（移动、红灯停、推搡、闪避、道具使用、QTE 判定）

**AI 设计原则**：
- 操作层统一，触发层分离
- 玩家和 AI 共用同一套 GAS Ability
- 失衡 QTE：玩家走 UI，AI 按概率判定
