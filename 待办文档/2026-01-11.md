# 2026-01-11 待办

## 当前阶段：关卡1 耐力之匣 - Phase 2 道具系统

> 设计文档：[总体策划](../关卡设计/01-耐力之匣/总体策划.md)、[道具系统](../关卡设计/01-耐力之匣/道具系统.md)

---

## 今日任务

### P1：验证测试 (核心流程)

> [!IMPORTANT]
> 完成所有验证后，标记为 `[x]`。

- [ ] **准备工作**: 场景放置 `BP_Item_Base` (Throwable/香蕉皮)
- [ ] **流程 1: 拾取**
    - [ ] 触碰道具，道具消失
    - [ ] 调试检查 `Comp_Character_Endurance.ThrowItemId` 有值
- [ ] **流程 2: 瞄准**
    - [ ] 按住右键: 进入瞄准动画 (UpperBody blending)
    - [ ] 手中出现 PropMesh
    - [ ] 调试检查 Tag `Player.Action.Aiming` 存在
    - [ ] 松开右键: 退出瞄准，PropMesh 消失
- [ ] **流程 3: 互斥 (Push Block)**
    - [ ] 按住右键 + 点击左键: **不触发推搡** (无推人动画/体力消耗)
- [ ] **流程 4: 投掷**
    - [ ] 按住右键 + 点击左键: 播放投掷蒙太奇
    - [ ] 道具飞出 (Spawn BP_Item at Socket)
    - [ ] 手中 PropMesh 消失
    - [ ] 角色退出瞄准
- [ ] **流程 5: 双框检测**
    - [ ] 走入 DetectionBox (大圈): 道具模型高亮 (Outline)
    - [ ] 走出 DetectionBox: 高亮消失
- [ ] **多人同步测试**
    - [ ] Client 1 拾取，Client 2 看到道具消失
    - [ ] Client 1 瞄准，Client 2 看到动作和手持物
    - [ ] Client 1 投掷，Client 2 看到飞行道具

### P2：道具子类开发

| 子类 | 说明 | 状态 |
|------|------|:----:|
| BP_Item_Banana | 失衡 + 落地变陷阱 | ❌ |
| BP_Item_Bomb | 范围摔倒 | ❌ |
| BP_Item_Lightning | SpeedRate ×1.5 | ❌ |
| BP_Item_Shield | Shielded 标签 | ❌ |
| BP_Item_MedicalKit | HP +50 | ❌ |
| BP_Item_Coin | Coin +1 | ❌ |

### P3：护盾逻辑修改

- [ ] GA_Stagger / GA_Fall 检查 Shielded
- [ ] BP_Monitor 检测伤害减半

### P4：UI

- [ ] WBP_LevelHUD_Endurance
- [ ] 道具栏 / Buff 倒计时
