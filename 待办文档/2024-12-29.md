# 2024-12-29 待办

## 当前阶段：关卡1 耐力之匣 设计完善

### 今日完成
- [x] AI 与玩家统一设计方案
- [x] 感知系统设计（DetectionBox）
- [x] 输入系统设计（IMC 分层）
- [x] 操作系统设计（组件化 + GM 配置驱动）
- [x] 确认 AIC 不需要子类
- [x] 更新相关设计文档
- [x] 投掷系统设计（MOTS 插件，瞄准→抛出两阶段）
- [x] ST_LevelFlow_Main 文档完善（Preparing/InProgress/Settlement 阶段）
- [x] STT 任务文档记录（SetMatchPhase/SimplePrint/AddMatchStatus/FillAI）
- [x] GS_Core 添加 LevelSubST 组件（StateTreeComponent）
- [x] STT_StartLevelSubST 任务（启动 GM.LevelSubStateTree 到 GS.LevelSubST）
- [x] ST_LevelFlow_Main 添加 StartLevelSubST 状态
- [x] GM_Endurance 配置（继承 GM_Core，配置关卡专属变量）
- [x] GS_Endurance 配置（继承 GS_Core，配置时长参数）
- [x] 红灯/绿灯状态切换（ST_Endurance 状态树）
- [x] GS_Endurance.IsRedLight 变量（RepNotify）
- [x] GS_Endurance.OnIsRedLightChange 事件分发器
- [x] GameplayTags 扩展（Player.Action.* / Player.State.*）
- [x] 玩家移动状态判定（Comp_Character_Endurance 检测速度 → GE_Moving）
- [x] BP_Puppet 木偶 Actor（骨骼网格 + 转身动画 + Anim Notify）
- [x] AN_DetectionStart（根据 bIsFacing 控制检测开关）
- [x] GS_Endurance.IsDetecting 变量（RepNotify）
- [x] GS_Endurance.Server_SetDetecting 函数
- [x] GS_Endurance.Multicast_PlayerDetected 函数
- [x] BP_Monitor 监视器 Actor（Line Trace 检测）
- [x] 红灯时检测 Player.State.Danger → 广播 OnPlayerDetected
