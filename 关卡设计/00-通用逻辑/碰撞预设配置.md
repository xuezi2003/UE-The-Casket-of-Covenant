# 碰撞预设配置

本文档记录项目中自定义的碰撞通道和预设配置。

---

## 自定义碰撞通道

| 通道名 | 类型 | 默认响应 | 用途 |
|--------|------|:--------:|------|
| **PawnBlock** | Object | 阻挡 | 穿过 StartLine 后的玩家通道 |
| **PuppetVision** | Trace | 阻挡 | 木偶视线检测 |

> [!WARNING]
> **PawnBlock 默认响应是阻挡**：自定义 Object Channel 的默认响应会应用到所有现有预设。这意味着使用引擎内置预设（如 OverlapAllDynamic）的组件，其 PawnBlock 通道**默认是 Block 而非 Overlap**。
>
> **潜在问题**：如果某个 Overlap 检测组件（如道具检测盒）使用了 OverlapAllDynamic 预设但没有手动修改 PawnBlock 响应，它会意外阻挡穿过 StartLine 的玩家。
>
> **排查建议**：遇到异常碰撞阻挡时，检查相关组件的 PawnBlock 通道响应是否正确。

---

## 碰撞预设配置

### Pawn（玩家胶囊体）

| 通道 | 响应 | 说明 |
|------|:----:|------|
| **Visibility** | 忽略 | - |
| **Camera** | 忽略 | 不阻挡其他玩家摄像头 |
| **PuppetVision** | 忽略 | 不参与遮挡检测（由 Mesh 负责） |
| WorldStatic | 阻挡 | 环境碰撞 |
| WorldDynamic | 阻挡 | 动态物体碰撞 |
| Pawn | 阻挡 | 玩家互相阻挡 |
| PawnBlock | 阻挡 | 穿过 StartLine 后互相阻挡 |

### CharacterMesh（玩家骨骼网格）

| 通道 | 响应 | 说明 |
|------|:----:|------|
| **Visibility** | 忽略 | - |
| **Camera** | 忽略 | 不阻挡其他玩家摄像头 |
| **PuppetVision** | 阻挡 | 负责遮挡 Line Trace |
| **Pawn** | 忽略 | 不参与玩家物理碰撞 |
| **PawnBlock** | 忽略 | 不参与玩家物理碰撞 |
| **Vehicle** | 忽略 | - |
| WorldStatic | 阻挡 | - |
| WorldDynamic | 阻挡 | - |

**碰撞类型**：Query Only (No Physics Collision)

### OverlapAllDynamic（引擎预设 + 修改）

用于需要 Overlap 检测的组件（如 BP_Monitor 的 DetectionBox）。

| 通道 | 响应 | 说明 |
|------|:----:|------|
| Visibility | 重叠 | - |
| Camera | 重叠 | - |
| **PuppetVision** | 重叠 | Monitor 检测用 |
| WorldStatic | 重叠 | - |
| WorldDynamic | 重叠 | - |
| Pawn | 重叠 | - |
| PhysicsBody | 重叠 | - |
| Vehicle | 重叠 | - |
| Destructible | 重叠 | - |
| **PawnBlock** | 重叠 | ⚠️ **需手动修改**（默认是阻挡） |

**碰撞类型**：Query Only (No Physics Collision)

---

## 设计说明

### 遮挡检测分离

- **胶囊体**：负责物理碰撞、移动阻挡
- **CharacterMesh**：负责 PuppetVision 遮挡检测

这样蹲行时 Mesh 跟随动画变矮，自然改变遮挡效果，无需修改胶囊体高度。

### 摄像头穿透

Pawn 和 CharacterMesh 都对 Camera 通道忽略，确保玩家靠近时不会遮挡其他玩家的摄像头。

---

## 相关文档

- [蹲行系统.md](../01-耐力之匣/GAS/蹲行系统.md) - 遮挡检测机制
- [BP_StartLine.md](../01-耐力之匣/场景/功能组件/BP_StartLine.md) - PawnBlock 通道使用
- [BP_Monitor.md](../01-耐力之匣/场景/木偶与监视器/BP_Monitor.md) - PuppetVision 通道使用
