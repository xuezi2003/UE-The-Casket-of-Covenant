# UI 架构概述

> 本文档描述 UI 系统的整体架构设计

## 核心设计原则

**游戏管游戏的，关卡管关卡的**

| 层级 | 管理者 | 管什么 |
|------|--------|--------|
| 游戏级 | `Comp_UI_Core` + `WBP_Core_Main` | 通用 UI（状态面板、菜单） |
| 关卡级 | `Comp_PC_<Level>` + `WBP_LevelHUD_<Level>` | 关卡专属 UI（QTE、道具栏） |

---

## Widget 架构

### 整体结构

```
PC_Core
├── [固有组件] Comp_UI_Core ✅
│   ├── WBP_Core_Main（GSCUserWidget）← 顶层容器 ✅
│   │   ├── Panel_Core_Status ← WBP_Core_Status 插槽
│   │   └── LevelHUDSlot ← 关卡 HUD 插入点（待实现）
│   │
│   └── WBP_GameMenu（ESC 菜单，待实现）
│
└── [动态组件] Comp_PC_<Level> ✅（服务器复制）
    └── WBP_LevelHUD_<Level>（关卡专属 HUD 容器）
```

### Widget 职责

| Widget | 父类 | 职责 | 状态 | 详细文档 |
|--------|------|------|------|----------|
| `WBP_Core_Main` | GSCUserWidget | 顶层容器，管理状态面板 + 关卡插槽 | ✅ 框架 | [WBP_Core_Main.md](WBP_Core_Main.md) |
| `WBP_Core_Status` | GSCUserWidget | 状态面板：头像 + HP/Stamina/SpeedRate | ✅ 已实现 | [WBP_Core_Status.md](WBP_Core_Status.md) |
| `WBP_Core_Avatar` | GSCUserWidget | 动态头像显示 | ✅ 已实现 | [WBP_Core_Avatar.md](WBP_Core_Avatar.md) |
| `WBP_GameMenu` | - | 游戏菜单（ESC 呼出） | ❌ 待实现 | [WBP_GameMenu.md](WBP_GameMenu.md) |

---

## PC 组件架构

### Comp_UI_Core

详见 [Comp_UI_Core.md](Comp_UI_Core.md)

**职责**：管理游戏级 UI（WBP_Core_Main + WBP_GameMenu）

### Comp_PC_<Level>

**职责**：管理关卡专属 UI 和输入

**添加时机**：由 `GM_<Level>.LevelPCComponentClass` 配置，`PC_Core.OnPossess` 时动态添加（服务器复制）

**关卡1 示例**：详见 [Comp_PC_Endurance.md](../../01-耐力之匣/核心类/Comp_PC_Endurance.md)

---

## Gameplay Tags 驱动 UI 状态

| Tag | UI 响应 |
|-----|---------|
| `Player.State.Staggered` | 显示 QTE UI |
| `Player.State.Exhausted` | 体力条变红 |
| `Level.Phase.InProgress` | 显示倒计时（待实现） |

---

## 相关文档

- [属性系统.md](../属性系统.md)
- [输入系统.md](../输入系统.md)
- [系统架构.md](../系统架构.md)
- [Plugin Documentation Links.md](../../../参考文档/Plugin%20Documentation%20Links.md)（GSCUserWidget）
