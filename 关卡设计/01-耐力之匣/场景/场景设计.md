# 关卡 1 (L_Endurance) 场景具体设计要点

> [!TIP]
> **分工原则**：
> - **手动摆放**：场地结构组件（地板、天花板、墙段、柱段）直接在关卡中摆放。
> - **IA Scatter 生成**：负责具有随机性需求的元素（课桌、椅子、分发道具）。
> - **静态布置**：负责固定结构（墙体、黑板阵列、监控、木偶、灯光）。

## 1. 空间结构与尺寸
- **整体布局**：长方形封闭大厅。
- **墙面/地面材质**：原始深灰色清水混凝土，保留模板拼缝痕迹。
- **天花板**：高处覆盖纯黑体积雾，隐藏天花板细节。

## 2. 核心地面元素 (IA Scatter 填充)
- **掩体物件**：巨型木质课桌、靠背椅。
  - **比例**：高度为玩家角色的 2 倍。
- **分布逻辑**：赛道全区域随机散落，确保有足够密度的完全遮挡掩体。

## 3. 两侧动态墙面 (静态基础 + 逻辑驱动)
- **结构**：左右墙面各配置一组黑板阵列（通过 `BP_BlackboardWall` 生成，可配置行列数）。
- **机械结构**：黑板嵌入粗糙工字钢导轨中。
- **动态表现**：黑板沿导轨做水平或垂直阶梯式滑动。
- **黑板材质**：深绿色或粉白色漆面，布满粉笔痕迹与公式纹理。

## 4. 墙面监控摄像头 (静态布置)
- **安装位置**：左右墙面高处，均匀分布。
- **外观动态**：半球形外壳，带 LED 呼吸灯；在水平范围内做匀速扫描。

## 5. 终点视线区 (静态布置)
- **背景**：覆盖整墙的巨型固定黑板。
- **木偶 (BP_Puppet)**：巨型木偶，位于终点线后方中心，执行转身动画。

## 6. 灯光与细节 (静态/辅助)
- **主光源**：天花板高处等间距排列的垂直聚光灯阵列。
- **照度**：中心区域高亮，墙根区域处于浓重阴影中。
- **红灯反馈**：通过后处理体积实现轻微的全局红色偏移。
- **细节粒子**：水泥地面废纸碎片（静态）与光路中的悬浮灰尘粒子。

## 7. 导航网格配置 (AI 寻路) ✅

**NavMeshBoundsVolume**：
- 覆盖整个封闭大厅地面（起点区域 + 赛道 + 终点区域）

**RecastNavMesh-Default 配置**：
- **Agent Radius**: 50.0（消除空洞中的小块可行走区域）

**Actor 导航影响配置**：
- **BP_Puppet**: Can Ever Affect Navigation = ✅（木偶周围挖空洞，AI 无法穿过）
- **BP_StartLine**: Can Ever Affect Navigation = ❌（AI 可以穿过起点线）
- **BP_FinishLine**: Can Ever Affect Navigation = ❌（AI 可以穿过终点线）

> [!NOTE]
> **NavMesh 是静态的**：NavMesh 在编辑器中生成，游戏运行时不会动态变化。玩家的 Pawn/PawnBlock 碰撞通道切换不会影响 NavMesh，只影响物理碰撞。AI 通过 Avoidance 系统避开动态障碍（其他玩家）。

---

## 相关文档

- [场景组件.md](场景组件.md) - 场景组件索引
- [IAScatter布局.md](IAScatter布局.md) - IA Scatter 实例配置记录
- [总体策划.md](../总体策划.md) - 关卡总体策划
