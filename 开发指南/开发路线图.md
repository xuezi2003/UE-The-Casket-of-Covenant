# 开发路线图

> 契约之匣项目的整体开发规划

---

## 阶段总览

```
阶段 0：最小基础设施 ──→ 所有后续工作的地基
    ↓
阶段 1：关卡1 耐力之匣 ──→ 核心玩法验证
    ↓
阶段 2：关卡2 逻辑之匣 ──→ 验证框架扩展性
    ↓
阶段 3：大厅 + 主菜单 ──→ 补全入口流程
    ↓
阶段 4~6：剩余关卡 + 联调
```

---

## 阶段 0：最小基础设施

> **定位**：地基层，所有关卡都建立在此之上

### 核心产出与后续使用

| 产出 | 后续阶段如何复用 |
|:-----|:-----------------|
| **GM_Core / GS_Core** | 所有关卡的 GM/GS 继承此基类 |
| **PS_FiveBox + ASC** | 全流程共用，Seamless Travel 保留 |
| **ST_LevelFlow** | 所有关卡复用相同流程框架 (State Tree) |
| **编号系统 / F_PlayerRecord** | UI显示、淘汰记录、结算画面 |
| **BAS_Core (Health/Coins)** | 所有关卡共用属性 |

### 继承关系

```
GM_Core ← GM_Endurance / GM_Logic / GM_Courage / ...
GS_Core ← GS_Endurance / GS_Logic / ...
```

---

## 时间规划（约 75 天）

| 阶段 | 内容 | 预估 | 占比 |
|:-----|:-----|:-----|:----:|
| 0 | 基础设施 | 5 天 | 7% |
| 1 | 耐力之匣 | 18 天 | 24% |
| 2 | 逻辑之匣 | 15 天 | 20% |
| 3 | 大厅+主菜单 | 10 天 | 13% |
| 4-6 | 剩余关卡 | 20 天 | 27% |
| - | 联调 | 7 天 | 9% |

---

## 为什么必须先做阶段 0

| 跳过阶段 0 的后果 |
|:------------------|
| 每个关卡重复编写淘汰、Travel、AI填充逻辑 |
| 状态切换风格不统一，难以维护 |
| 后期补加编号系统需要大改数据结构 |
| ASC 迁移会破坏已有能力逻辑 |
| 可能关卡做完才发现 Seamless Travel 有问题 |

> **阶段 0 占 7% 时间，决定剩余 93% 工作的稳定性。**
