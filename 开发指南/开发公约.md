# FiveBox 开发公约

> Cascade 与开发者的协作规范

> [!CAUTION]
> **遇到问题先考虑插件已有功能，权衡利弊后再给出方案！**
> 
> 详见 [插件使用指南](../参考文档/插件使用指南.md)

---

## 零、核心原则

1. **文档第一**：任何规划前必须先阅读相关设计文档
2. **插件先查文档**：使用插件功能前必须查询官方文档，首次访问后记录 URL 至 `参考文档/插件文档链接.md`
3. **宏观到微观**：先给出整体思路，再逐步拆解，一步一步执行
4. **结构优先**：不为一时快捷破坏整体结构
5. **文档一致性**：文件之间内容不得矛盾或冗余
6. **及时拆分**：文档过长时及时拆分，用文件夹合理组织
7. **善用工具**：遇到繁琐问题先思考最优解，充分利用现有插件
8. **充分利用插件能力**：不要重复造轮子，GAS Companion / State Tree / Advanced Sessions 等插件和引擎功能必须优先使用
9. **拒绝一次性代码**：不要为了验证功能就写一堆临时 demo，每一行代码都应该是正式实现的一部分
10. **面向扩展设计**：不要因为是前期阶段就精简逻辑，所有设计都要考虑后期扩展需求
11. **持久化进度记录**：及时更新 `进度跟踪/` 中的进度文件，确保随时可查当前状态

---

## 〇、职责划分

| 职责 | Cascade | 开发者 |
|:-----|:-------:|:------:|
| 阅读设计文档 | ✅ | ✅ |
| 规划开发步骤 | ✅ | 审核 |
| 查询插件文档 | ✅ | - |
| UE5 中操作 | - | ✅ |
| 更新进度记录 | ✅ | 反馈完成 |
| 排查问题 | ✅ | 提供截图/描述 |
| 版本控制提交 | - | ✅ |

---

## 一、指导步骤格式

### 每个任务我会提供：

1. **目标**：本步骤要完成什么
2. **操作**：具体在 UE5 中做什么（步骤清单）
3. **验收**：怎么确认做对了

### 示例：

```
## 任务：创建 GI_FiveBox

**目标**：创建 GameInstance 蓝图

**操作**：
1. Content Browser → 0_Core/Blueprints/Core
2. 右键 → Blueprint Class → 搜索 AdvancedFriendsGameInstance
3. 命名为 GI_FiveBox

**验收**：打开蓝图，确认父类显示为 AdvancedFriendsGameInstance
```

---

## 二、进度记录

### 文档结构（总分格式）

```
.
├── 进度跟踪/
│   ├── index.md              ← 最外层，快速查询整体进度
│   ├── 00-核心系统/
│   │   └── index.md          ← 核心类、GAS、StateTree 等
│   ├── 01-耐力之匣/
│   │   └── index.md          ← 关卡1各功能模块
│   ├── 02-逻辑之匣/
│   │   └── index.md
│   ├── 03-勇气之匣/
│   │   └── index.md
│   ├── 04-洞察之匣/
│   │   └── index.md
│   └── 05-牺牲之匣/
│       └── index.md
```

### 总览格式

| 模块 | 状态 | 最后更新 | 详情 |
|:-----|:----:|:---------|:-----|
| 核心系统 | 🟡 进行中 | 2024-12-24 22:30 | [详情](../进度跟踪/00-核心系统/) |

### 分进度格式（每个功能模块）

| 功能 | 状态 | 完成时间 | 备注 |
|:-----|:----:|:---------|:-----|
| 红绿灯切换 | ✅ | 2024-12-25 14:00 | - |
| 移动检测 | 🟡 | - | 进行中 |

### 状态标识

- ✅ 已完成
- 🟡 进行中
- ⬜ 未开始
- ❌ 阻塞

### 谁来更新？

- **你完成后告诉我**，我来更新进度文件（包含准确时间）

---

## 三、沟通约定

### 你对我说：

| 你说 | 我理解为 |
|:-----|:---------|
| `done` 或 `完成` | 当前步骤已完成，给我下一步 |
| `卡住了` + 描述 | 遇到问题，需要我帮你排查 |
| `跳过` | 暂时跳过当前步骤 |
| `为什么` | 解释当前步骤的原因 |
| `太复杂` | 把步骤拆得更细 |
| `截图` + 图片 | 我会看截图帮你分析 |

### 我对你说：

| 我说 | 含义 |
|:-----|:-----|
| **操作** | 你需要在 UE5 中执行的步骤 |
| **验收** | 完成后检查是否正确 |
| **注意** | 容易出错的地方 |
| **可选** | 非必须，但推荐做 |

---

## 四、问题排查流程

1. 你描述问题 + 提供截图（如果有）
2. 我分析可能原因
3. 给出排查步骤
4. 你反馈结果
5. 循环直到解决

---

## 五、版本控制

- 每完成一个**阶段**，用 Diversion 提交一次
- Commit 信息格式：`[阶段X] 完成内容描述`
- 例如：`[阶段0] 创建核心类蓝图骨架`

---

## 六、其他约定

- [ ] 有补充再添加

---

**确认无误后，我们开始第一步。**
